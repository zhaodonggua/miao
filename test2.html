<script>
    class PriorityQueue {
        constructor() {
            this.elements = []

        }
        #swap(i, j) {
            var a = this.elements[i]
            this.elements[i] = this.elements[j]
            this.elements[j] = a
        }
        push(val) {
            //加进去数字的编号
            let idx = this.elements.push(val) - 1
            while (idx > 0) {
                //获取当前元素的父元素编号
                let pIdx = (idx - 1) >> 2
                if (this.elements[idx] > this.elements[pIdx]) {
                    this.#swap(idx, pIdx)
                } else {
                    break
                }
                //继续和上层元素进行比较
                idx = pIdx
            }

            return this

        }
        pop() {
            if (this.elements.length == 1) return this.elements.pop();
            if (this.elements.length > 1) {
                let result = this.elements[0]
                //把最后一项放到第一项 
                this.elements[0] = this.elements.pop()
                this.heapDown(0) //从根节点开始向下维护
                return result
            }
        }
        heapDown(idx) {
            while (true) {
                let maxIdx = idx
                let leftIdx = (idx * 2) + 1
                //如果子节点存在，才比较
                if (leftIdx < this.elements.length && this.elements[leftIdx] > this.elements[maxIdx]) {
                    maxIdx = leftIdx
                }
                let rightIdx = leftIdx + 1
                //如果子节点存在，才比较
                if (rightIdx < this.elements.length && this.elements[rightIdx] > this.elements[maxIdx]) {
                    maxIdx = rightIdx
                }
                if (maxIdx !== idx) {
                    this.#swap(maxIdx, idx)
                    idx = maxIdx
                } else {
                    return
                }
            }
        }
        peek() {
            return this.elements[0]
        }
    }



</script>

<script>
    let node = {
        val: 2,
        next: null
    }
    function arrayToList(array) {
        if (array.length == 0) return null;
        let nodes = []
        for (let i = 0; i < array.length; i++) {
            let node = {
                val: array[i],
                next: null
            }
            nodes.push(node)
        }
        for (let i = 0; i < nodes.length - 1; i++) {
            nodes[i].next = nodes[i + 1]
        }
        return nodes[0]
    }

    function arrayToList2(array) {
        let dummy = {
            val: 0,
            next: null
        }
        // prev = dummy

        for (let i = 0; i < array.length; i++) {
            let node = {
                val: array[i],
                next: null
            }
            prev.next = node
            prev = node
        }
        return dummy.next
    }

    function arrayToList3(array) {
        let prev = null
        for (let i = array.length - 1; i >= 0; i--) {
            let node = {
                val: array[i],
                next: null
            }
            node.next = prev
            prev = node
        }
        return prev
    }



</script>
<script>
    var x = (5 + 8 * (9 + 2(4 + 5 * (2 * 5(3(4 + 0) * 7) % 2) / 2) * 4.5)) / 9
    var y = 'foobar'
    var fruit = 'apple'

    for (var i = 0; i < 10; i++) {
        console.log(i)
    }

    if (x >= 25) {
        console.log(3)
    } else if (x <= 30) {
        console.log(2)
    } else {
        console.log(2)
    }
</script>

<script>
    function filter(array, f) {
        var result = []
        for (let i = 0; i < array.length; i++) {
            let p = array[i]
            if (f(p)) result.push(p);
        }
        return result;
    }

    let ancestry = [
        {
            "name": "Emma de Milliano", "sex": "f",
            "born": 1876, "died": 1956,
            "father": "Petrus de Milliano",
            "mother": "Sophia van Damme"
        },
        {
            "name": "Carolus Haverbeke", "sex": "m",
            "born": 1832, "died": 1905,
            "father": "Carel Haverbeke",
            "mother": "Maria van Brussel"
        }
    ]

    filter(ancestry, function (person) {
        return person.born > 1000
    })

</script>
<script>
    //reduce函数，把每一项与初始值进行运算
    function reduce(ary, compute, initial) {
        for (let i = 0; i < ary.length; i++) {
            initial = compute(initial, ary[i])
        }
        return initial
    }

    [1, 2, 3, 4, 5].reduce(function (a1, a2) {
        return a1 + a2
    }, 0)
    [1, 2, 3, 4, 5].reduce(function (a1, a2) {
        return a1 * a2
    }, 1)
    [1, 2, 3, 4, 5].reduce(function (a1, a2) {
        return Math.max(a1, a2)
    }, -Infinity)







</script>
<script>
    function intersectionBy(array1, array2, predicate) {
        let result = []
        for (let i = 0; i < array.length; i++) {
            for (let j = 0; j < array.length; j++) {
                if (predicate(array1[i]) === predicate(array2[j])) {
                    result.push(array1[i])
                }
            }
        }
        return result;


    }
    function intersectionWith(array1, array2, comparor) {
        let result = []
        for (let i = 0; i < array.length; i++) {
            for (let j = 0; j < array.length; j++) {
                if (comparor(array1[i], array2[j])) {
                    result.push(array1[i])
                }
            }
        }
        return result;
    }

    function intersection(array1, array2) {
        let result = []
        let set = new Set(array2)
        for (let i = 0; i < array1.length; i++) {
            if (set.has(array1[i])) result.push(array1[i]);
        }
        return result;
    }



</script>
<script>
    var users = [
        { 'user': 'barney', 'age': 36, 'active': true },
        { 'user': 'jim', 'age': 40, 'active': false },
        { 'user': 'lilly', 'age': 36, 'active': true },
        { 'user': 'damiao', 'age': 40, 'active': false },
        { 'user': 'john', 'age': 36, 'active': true },
        { 'user': 'fred', 'age': 40, 'active': false }
    ];

    function filter(ary, predicate) {
        if (typeof predicate === 'string') {
            let result = []
            ary.forEach(it => {
                if (it[predicate]) {
                    result.push(it)
                }
            });
            return it
        }
        if (Array.isArray(predicate)) {
            let result = []
            ary.forEach(it => {
                if (it[predicate[0]] == predicate[1]) {
                    result.push(it)
                }
            })
            return it
        }

    }
    function property(name) {
        return function (obj) {
            return get(obj, name)
        }
    }
    getFaterName = property('father.name')
    getFaterName({ name: 'zhang', age: 8, father: { name: 'laozhang', age: 38 } })
    function get(obj, path) {
        let names = path.split('.')
        for (let name of names) {
            obj = obj[name]
            if (obj == null) return obj;
        }
        return obj
    }
    get(obj, 'a.b.c')

    function get(obj, path) {
        let names = path.split('.')
        return names.reduce((obj, name) => { return obj ?? obj[name] }, obj)
    }



    //get({ a: { b: { c: 3 } } }, 'a.b.c')


    function toPath(path) {
        if (typeof path == 'string') {
            return path.split('[')
                .flatMap(it => it.split(']'))
                .flatMap(it => it.split('.'))
                .flatMap(it => it)
        }
        return path
    }


    function negate(f) {
        return function (...args) {
            return !f(...args)
        }
    }

</script>
<script>
    function matches(target) {
        return function (obj) {





        }
    }






</script>
<script>
    function maskify(cc) {
        let result = []
        if (cc == "") return "";
        if (cc.length <= 4) return cc;
        for (let i = 0; i < cc.length; i++) {
            if (i < cc.length - 4) result.push("#");
            else {
                result.push(cc[i])
            }
        }
        return result
    }






</script>
<script>
    function maskify(cc) {
        let length = cc.length
        if (length <= 4) return cc;
        if (length > 4) {
            //前面部分
            let head = cc.substring(0, length - 4)
            head = head.replace(/(.)/g, "#")
            //最后4位
            let tail = cc.substring(length - 4)
            return head.concat(tail)
        }
    }

    maskify("4556364607935616")



</script>
<script>
    var s = 'the cia and fbi'
    console.log(s.replace(/\b(fbi|cia)\b/g, function (str) {
        return str.toUpperCase();
    }))

    var stock = "1 lemon,2 cabbages,and 101 eggs"
    function minusOne(match, amount, unit) {
        amount = Number(amount) - 1
        if (amount == 1) unit = unit.slice(0, unit.length - 1);
        else if (amount == 0) amount = "no";
        return amount + " " + unit;
    }
    console.log(stock.replace(/(\d+) (\w+)/g, minusOne))




</script>
<script>
    var code =
        //111111111111111111111
        console.log(a * a)
    /*22222222222222222222*/
    console.log(a * a * a)




    function decipherThis(str) {






    };
    function change() {




    }
    debugger;


    debugger;
    decipherThis('82yade 115te 103o')

    decipherThis('72olle 103doo 100ya')

    decipherThis('72eva 97 103o 97t 116sih 97dn 115ee 104wo 121uo 100o')
    function decipherThis(str) {
        //have fun!
        let result = str.replace(/(\d+)(\w+)(\s*)/g, transfer)
        result = result.substring(0, result.length - 1)
        console.log(result)
    };

    function transfer(whole, numbers, letters, num1, num2) {
        let letters_head = ''
        let letters_body = ''
        numbers = Number(numbers)
        //数字转为字母
        let word = String.fromCharCode(numbers)
        if (letter.length == 0)

            //获取最后那个字母
            let letters_tail = letters[letters.length - 1]
        if (letters.length > 1) {
            //获取第一个字母
            letters_head = letters[0];
        }
        if (letters.length > 2) {
            //获取中间字母
            letters_body = letters.substring(1, letters.length - 1)
        }
        let new_letters = word.concat(letters_tail)
        new_letters = new_letters.concat(letters_body)
        new_letters = new_letters.concat(letters_head)
        return new_letters + ' '
    }



    function remove(string) {


    }

</script>
<script>

    使用正则的exec函数自行实现与正则相关的所有其它函数：
    String.prototype.match2 = function () {

    }
    String.prototype.matchAll2 = function () {

    }
    String.prototype.replace2 = function () { }
    String.prototype.replaceAll2 = function () { }
    String.prototype.split2 = function () { }
    String.prototype.search2 = function () { }
    RegExp.prototype.test2 = function () { }


    debugger;
    remove("!!!Hi !!hi!!! !hi")
    function remove(string) {
        return string.replace(/(\w+)(!*)(\s*)/ig, transfer)
    }
    function transfer(whole, string1, string2, string3) {
        return string1 + string3
    }

    debugger;

    decipherThis('72eva 97 103o 97t 116sih 97dn 115ee 104wo 121uo 100o')

    decipherThis('72olle 103doo 100ya')

    decipherThis('82yade 115te 103o')
    function decipherThis(str) {
        //have fun!
        let result = str.replace(/(\d+)(\w+)?(\s*)/g, transfer)
        result = result.substring(0, result.length - 1)
        return result
    };

    function transfer(whole, numbers, letters, num1, num2) {
        let letters_head = ''
        let letters_body = ''
        let letters_tail = ''
        let new_letters = ''
        numbers = Number(numbers)
        /*
            1.只有数字
            2.只有字母
            3.字母个数为1个，2个，3个的不同情况
        */

        //数字转为字母
        let word = String.fromCharCode(numbers)

        //如果单词长度为0，那么直接返回第一个字母
        if (letters == undefined) {
            return word + ' ';
        }

        //单词长度为1，只获取尾部
        if (letters.length == 1) {
            letters_tail = letters[letters.length - 1]
        }

        //单词长度大于1，获取头部和尾部
        if (letters.length > 1) {
            //获取第一个字母
            letters_head = letters[0];
            //获取最后那个字母
            letters_tail = letters[letters.length - 1]
        }

        //单词长度大于2，再获取中间部分
        if (letters.length > 2) {
            //获取中间字母
            letters_body = letters.substring(1, letters.length - 1)
        }

        new_letters = word.concat(letters_tail)
        new_letters = new_letters.concat(letters_body)
        new_letters = new_letters.concat(letters_head)
        return new_letters + ' '
    }
</script>
<script>

    String.prototype.trim2 = function (c = ' ') {
        var str = this
        var reg = new RegExp('^' + c + '*|' + c + '*$', 'ig')
        return this.replace(reg, '')
    }
    debugger;
    function kebabize(str) {
        return str.replace(/\d/g, '').replace(/([A-Z])/g, transfer)
    }
    function transfer(_, str2) {
        return '-' + str2.toLowerCase()
    }

    kebabize('camelsHaveThreeHumps')


    var re = new RegExp(, flags)






</script>
<script>
    function JSONParse(str) {
        let result = {}
        let startIndex = 0
        let lastIndex
        startIndex = str.indexOf('"', startIndex) + 1
        lastIndex = str.indexOf('"', startIndex)
        str1 = str.substring(startIndex, lastIndex)

        startIndex = lastIndex + 2
        lastIndex = str.indexOf(',', startIndex)
        str2 = str.substring(startIndex, lastIndex)

        result[str1] = str2
        return result



    }

</script>
<script>
    String.prototype.match2 = function (re) {
        var str = this
        if (!re.global) return re.exec(str);
        var result = []
        re.exec(str)



    }


</script>
<script>
    obj = {
        x: 1, y: 2, a: null, b: false, c: [1, 2, null, { a: 1, b: 2 }, true, [4, 5, 6]], d: { z: { y: 1, x: 33 } }
    }

    JSON.stringify(obj)
    var str = '{"x":1,"y":2,"a":null,"b":false,"c":[1,2,null,{"a":1,"b":2},true,[4,5,6]],"d":{"z":{"y":1,"x":33}}}'
    var i = 0


    function parseObject() {
        var obj = {}
        i++
        if (str[i] == '}') {
            i++
            return obj
        }
        while (true) {
            var key = parseString()
            i++
            var val = parseValue()
            obj[key] = val
            if (str[i] == ',') {
                i++
                continue
            }
            if (str[i] == '}') {
                i++
                return obj
            }
        }
    }

    function parseValue() {
        if (str[i] == '"') {
            return parseString()
        }
        if (str[i] >= '0' && str[i] <= '9') {
            return parseNumber()
        }
        if (str[i] == 't') {
            return parseTrue()
        }
        if (str[i] == 'f') {
            return parseFalse()
        }
        if (str[i] == 'n') {
            return parseNull()
        }
        if (str[i] == '[') {
            return parseArray()
        }
        if (str[i] == '{') {
            return parseObject()
        }
    }


    function parseArray() {
        var ary = []
        i++
        if (str[i] == ']') {
            return ary
        }
        while (true) {
            var value = parseValue()
            ary.push(value)
            if (str[i] == ',') {
                i++
                continue
            }
            if (str[i] == ']') {
                i++ // skip ]
                return ary
            }
        }

    }
    function parseString() {
        i++ //skip first "
        var start = i
        while (str[i] !== '"') {
            i++ //此时i指向第二个双引号
        }
        var s = str.slice(start, i)
        i++
        return s
    }

    function parseNumber() {
        let numStr = ''
        while (str[i] >= '0' && str[i] <= '9') {
            numStr += str[i++]
        }
        return parseInt(numStr, 10)
    }

    function parseTrue() {
        i += 4
        return true
    }
    function parseFalse() {
        i += 5
        return false
    }
    function parseNull() {
        i += 4
        return null
    }


</script>
<script>
    /f../.exec('foo')
    RegExp.prototype.test2 = function () {
        return Boolean(this.exec(str))

    }
    'foooo11111222'.search(/fo./)
    String.prototype.search2 = function (re) {
        let oldLastIndex = re.lastIndex
        re.lastIndex = 0
        let match = re.exec(this)
        re.lastIndex = oldLastIndex
        if (match == null) return -1;
        else {
            return match.index
        }
    }
    'fosapofjsdaojf'.match(/f../)
    String.prototype.match2 = function (re) {
        let str = this
        if (!re.global) {
            return re.exec(str)
        }
        let result = []
        let oldLastIndex = re.lastIndex
        re.lastIndex = 0
        let match
        while (match = re.exec(str)) {
            result.push(match[0])
        }
        re.lastIndex = oldLastIndex
        return result
    }


</script>
<script>
    //看对象是否匹配目标
    function matches(target) {
        return function (obj) {
            for (let key in target) {
                if (obj[key] !== target[key]) {
                    return false;
                }
            }
            return true
        }
    }
    //src的属性能在obj中找到且相同
    function isMatch(obj = { a: 1, b: 2, c: { x: 1, y: 2 } }, src = { b: 2, c: { y: 2 } }) {
        for (key in src) {
            if (src[key] && typeof src[key] === 'object') {
                if (!isMatch(obj[key], src[key])) {
                    return false
                }
            }
            else {
                if (src[key] !== obj[key]) {
                    return false
                }
            }
        }
        return true


    }

    function matchesProperty(path, val) {
        return function (obj) {
            return obj[path] === val
        }
    }
    function filter(ary, predicate) {
        // if (typeof predicate === 'string') {
        //     predicate = property(predicate)
        // }
        // if (Array.isArray(predicate)) {
        //     predicate = matchesProperty(...predicate)
        // }
        // if (predicate && typeof predicate === 'object') {
        //     predicate = matches(predicate)
        // }
        predicate = iteratee(predicate)

        let result = []
        for (let i = 0; i < ary.length; i++) {
            if (predicate(ary[i], i)) {
                result.push(ary[i])
            }
        }
        return result
    }

    function findKey(obj, predicate) {
        // if (typeof predicate === 'string') {
        //     predicate = property(predicate)
        // }
        // if (Array.isArray(predicate)) {
        //     predicate = matchesProperty(...predicate)
        // }
        // if (predicate && typeof predicate === 'object') {
        //     predicate = matches(predicate)
        // }
        predicate = iteratee(predicate)
    }
    function iteratee(predicate) {
        if (typeof predicate === 'string') {
            predicate = property(predicate)
        }
        if (Array.isArray(predicate)) {
            predicate = matchesProperty(...predicate)
        }
        if (predicate && typeof predicate === 'object') {
            predicate = matches(predicate)
        }
        return predicate
    }


</script>
<script>
    function intersection(array1, array2) {
        let result = []
        for (let i = 0; i < array1.length; i++) {
            if (array2.includes(array1[i])) {
                result.push(array1[i])
            }
        }
        return result
    }

    function intersection(...arrays) {
        let result = []
        let comp = arrays[0]
        for (let i = 0; i < comp.length; i++) {
            let flag = true
            for (let j = 1; j < arrays.length; j++) {
                //存在不包含的数组，就是false
                if (!(arrays[j].includes(comp[i]))) {
                    flag = false;
                    break
                }
            }
            if (flag === true) result.push(comp[i]);
        }
        return result
    }



</script>
<script>
    var users = [
        { 'user': 'barney', 'age': 36, 'active': true },
        { 'user': 'fred', 'age': 40, 'active': false },
        { 'user': 'jim', 'age': 36, 'active': true },
        { 'user': 'lily', 'age': 40, 'active': false },
        { 'user': 'john', 'age': 37, 'active': true },
        { 'user': 'fred', 'age': 49, 'active': false }
    ];

    function filter(ary, predicate) {
        if (typeof predicate === 'string') {
            predicate = property(predicate)
        }
        if (Array.isArray(predicate)) {
            predicate = matchesProperty(...predicate)
        }
        if (predicate && typeof predicate === 'object') {
            predicate = matches(predicate)
        }
        predicate = iteratee(predicate)
    }


</script>
<script>
    function property(name) {
        return function (obj) {
            return obj[name]
        }
    }
    debugger;
    //获取对象的属性
    function get(obj, path) {
        let names = path.split('.')
        for (let name of names) {
            obj = obj[name]
            if (obj == null) {
                return obj;
            }
        }
        return obj
    }
    // obj = { a: { b: { c: 3 } } }
    // get(obj, 'a.b.c')

    function property(name) {
        return function (obj) {
            return get(obj, name)
        }
    }
</script>
<script>
    function matches(target) {
        return function (obj) {
            for (key in target) {
                if (target[key] !== obj[key]) {
                    return false
                }
            }
            return true
        }
    }

    debugger;
    isMatch()
    function isMatch(obj = { a: 1, b: 2, c: { x: 1, y: 2 } }, src = { b: 2, c: { y: 2 } }) {
        for (let key in src) {
            if (src[key] && typeof src[key] === 'object') {
                if (!isMatch(obj[key], src[key])) {
                    return false
                }
            } else {
                if (src[key] !== obj[key]) return false;
            }
        }
        return true
    }
</script>
<script>
    function getTextContent(node) {
        //如果是文本节点
        if (node.nodeType == document.TEXT_NODE) {
            return node.nodeValue
            //如果不是文本节点，那么拼接后返回
        } else if (node.nodeType == document.ELEMENT_NODE) {
            let result = ''
            for (var i = 0; i < node.childNodes.length; i++) {
                result += getTextContent(node.childNodes[i])
            }
            return result
        }
    }





</script>
<script>
    function getElelementById(id) {






    }




</script>
